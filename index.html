<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Secret Pawn Shop - Adjusted Difficulty</title>
    <style>
        * { image-rendering: pixelated; box-sizing: border-box; cursor: crosshair; }
        body {
            margin: 0; height: 100vh;
            background: #0a0a0a url('background.png') no-repeat center center;
            background-size: cover;
            display: flex; flex-direction: column; align-items: center;
            font-family: 'Courier New', monospace; color: #eee;
            overflow: hidden;
        }

        .top-bar { width: 100%; padding: 20px; }
        .wallet { background: rgba(0,0,0,0.85); border: 3px solid #5d3a1a; padding: 10px 20px; display: inline-block; box-shadow: 4px 4px 0px #000; }
        
        .appraisal-center {
            width: 460px; background: rgba(15, 15, 15, 0.95);
            border: 4px solid #5d3a1a; padding: 15px; text-align: center;
            z-index: 100; margin-top: 10px;
        }

        .item-visual { width: 64px; height: 64px; margin: 10px auto; background: #222; border: 2px solid #333; display: flex; align-items: center; justify-content: center; }
        .item-visual img { width: 50px; height: 50px; }

        .game-area { position: relative; width: 600px; height: 250px; margin-top: 30px; }
        
        /* ÏÇ¨Ïû•Ïùò ÏÜê */
        #dealer-hand {
            position: absolute; width: 130px; height: 130px;
            background: url('hand.png') no-repeat center center;
            background-size: contain;
            z-index: 10; pointer-events: none;
            opacity: 0; transform: translateY(-30px);
        }

        .cup-slot { position: absolute; width: 100px; height: 120px; display: flex; justify-content: center; align-items: flex-end; }
        .cup-pixel { width: 80px; height: 100px; background: #8b5a2b; border: 4px solid #3e2712; border-radius: 10px 10px 30px 30px; z-index: 2; transition: transform 0.3s ease-out; position: relative; }
        .cup-pixel::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 8px; background: #a67c52; border-bottom: 3px solid #3e2712; }
        
        .lifted .cup-pixel { transform: translateY(-80px) rotate(-15deg); }
        .coin-stack { position: absolute; bottom: 10px; display: none; z-index: 1; }
        .coin-stack.visible { display: flex; }
        .dot-coin { width: 34px; height: 10px; background: #ffd700; border: 2px solid #b8860b; border-radius: 3px; }

        button { background: #e63946; color: white; border: none; padding: 12px 25px; font-family: inherit; font-weight: bold; cursor: pointer; border-bottom: 4px solid #9d2630; margin-top: 10px; }
        button:disabled { background: #333; color: #666; border-bottom: none; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="wallet">
            <span style="color:#666; font-size: 0.7rem;">PURSE:</span> 
            <span id="balance" style="color:#ffd700; font-weight: bold;">0 COINS</span>
        </div>
    </div>

    <div class="appraisal-center">
        <div id="dialogue">"Î™ÖÌíà Í∞êÏ†ï ÏãúÏûëÌïòÍ≤†ÎÑ§. Î¨ºÍ±¥ÏùÑ Ïò¨Î†§ÎëêÍ≤å."</div>
        <div id="item-area" style="display:none;">
            <div class="item-visual"><img id="item-icon" src=""></div>
            <div id="item-name" style="font-size: 1.1rem; color: #4ade80;"></div>
            <div id="bet-details" style="color: #ffd700; font-size: 0.85rem; margin-top: 5px; font-weight: bold;"></div>
        </div>
        <button id="main-btn" onclick="appraise()">Î¨ºÍ±¥ Í∫ºÎÇ¥Í∏∞</button>
    </div>

    <div class="game-area">
        <div id="dealer-hand"></div>
        <div class="cup-slot" id="slot-0" style="left: 80px;" onclick="select(0)">
            <div class="cup-pixel"></div>
            <div id="coins-0" class="coin-stack"><div class="dot-coin"></div></div>
        </div>
        <div class="cup-slot" id="slot-1" style="left: 250px;" onclick="select(1)">
            <div class="cup-pixel"></div>
            <div id="coins-1" class="coin-stack"><div class="dot-coin"></div></div>
        </div>
        <div class="cup-slot" id="slot-2" style="left: 420px;" onclick="select(2)">
            <div class="cup-pixel"></div>
            <div id="coins-2" class="coin-stack"><div class="dot-coin"></div></div>
        </div>
    </div>

<script>
    let coins = 0;
    let playing = false;
    let finished = true;
    let coinPos = 1;
    let rewards = { win: 0 };
    let currentSpeed = 0.6; 

    const items = [
        { name: "ÎÇ°ÏùÄ ÌéúÏπò", val: 1, img: "pliers.png", msg: "Ïù¥Í±∏ Ïñ¥Îî∞ Ïç®? 1ÏΩîÏù∏Ïù¥ÎÇò Î∞õÏïÑÍ∞Ä." },
        { name: "ÏùÄÎèÑÍ∏à Î∞òÏßÄ", val: 2, img: "ring.png", msg: "ÏùÄ Ìï®ÎüâÏù¥ ÎÇÆÏïÑ. ÏÑûÎäî Í±¥ ÎåÄÏ∂© ÌïòÏßÄ." },
        { name: "ÎÇ°ÏùÄ Î°§Î†âÏä§", val: 3, img: "rolex.png", msg: "Ïò§... ÌÉúÏóΩÏù¥ ÏÇ¥ÏïÑÏûàÍµ∞. Ï†úÎ≤ïÏù¥Ïïº." },
        { name: "Î™ÖÌíà Í∞ÄÏ£Ω ÏßÄÍ∞ë", val: 4, img: "wallet.png", msg: "Í∞ÄÏ£Ω ÏÉÅÌÉúÍ∞Ä Ï¢ãÏïÑ. ÏßëÏ§ëÌï¥Ïïº Ìï† Í±∞Ïïº." },
        { name: "Îã§Ïù¥ÏïÑÎ™¨Îìú Î∞òÏßÄ", val: 5, img: "diamond.png", msg: "Ïù¥Í±¥ ÏßÑÏßúÍµ∞! ÎÇ¥ Ïã§Î†•ÏùÑ Î≥¥Ïó¨Ï£ºÎßà!" }
    ];

    function appraise() {
        const item = items[Math.floor(Math.random() * items.length)];
        rewards.win = item.val;

        // üéØ ÎÑàÎ¨¥ Îπ†Î•¥ÏßÄ ÏïäÍ≤å Ïû¨Ï°∞Ï†ïÎêú ÏÜçÎèÑ (Îã®ÏúÑ: Ï¥à)
        const speeds = {
            1: 0.9,   // ÏïÑÏ£º ÎäêÎ¶º (Ïó¨Ïú†)
            2: 0.75,  // ÎäêÎ¶º
            3: 0.6,   // Î≥¥ÌÜµ
            4: 0.45,  // Ï°∞Í∏à Îπ†Î¶Ñ
            5: 0.35   // Îπ†Î¶Ñ (ÏßëÏ§ëÌïòÎ©¥ Î≥¥Ïù¥Îäî Ï†ïÎèÑ)
        };
        currentSpeed = speeds[rewards.win];

        document.getElementById('item-area').style.display = 'block';
        document.getElementById('item-icon').src = item.img;
        document.getElementById('item-name').innerText = item.name;
        document.getElementById('dialogue').innerText = `"${item.msg}"`;
        document.getElementById('bet-details').innerText = `ÏÑ±Í≥µ: ${rewards.win} COINS / Ïã§Ìå®: 1 COIN`;
        
        document.getElementById('main-btn').innerText = "ÏïºÎ∞îÏúÑ ÏàòÎùΩ";
        document.getElementById('main-btn').onclick = startShuffle;
    }

    function startShuffle() {
        playing = true; finished = false;
        document.getElementById('main-btn').disabled = true;
        const hand = document.getElementById('dealer-hand');

        coinPos = Math.floor(Math.random() * 3);
        document.querySelectorAll('.coin-stack').forEach(s => s.classList.remove('visible'));
        document.querySelectorAll('.cup-slot').forEach(s => s.classList.remove('lifted'));

        setTimeout(() => {
            document.getElementById(`slot-${coinPos}`).classList.add('lifted');
            document.getElementById(`coins-${coinPos}`).classList.add('visible');
            
            setTimeout(() => {
                document.getElementById(`slot-${coinPos}`).classList.remove('lifted');
                document.getElementById(`coins-${coinPos}`).classList.remove('visible');
                
                hand.style.opacity = "1";
                // ÏÜê Ïù¥Îèô Ïï†ÎãàÎ©îÏù¥ÏÖò ÏÜçÎèÑ Ïã±ÌÅ¨
                hand.style.transition = `all ${currentSpeed}s ease-in-out`;
                performShuffle(0);
            }, 1000);
        }, 500);
    }

    function performShuffle(count) {
        const hand = document.getElementById('dealer-hand');
        const shuffleLimit = 10; // ÏÑûÎäî ÌöüÏàò

        if (count >= shuffleLimit) {
            hand.style.opacity = "0";
            playing = false;
            document.getElementById('dialogue').innerText = "Ïûê, Í≥®ÎùºÎ≥¥Í≤å. Ïñ¥ÎîîÏóê Ïà®ÏóàÏùÑÍπå?";
            return;
        }

        let a = Math.floor(Math.random() * 3);
        let b = Math.floor(Math.random() * 3);
        while(a === b) b = Math.floor(Math.random() * 3);

        const slotA = document.getElementById(`slot-${a}`);
        const slotB = document.getElementById(`slot-${b}`);
        
        slotA.style.transition = `left ${currentSpeed}s ease-in-out`;
        slotB.style.transition = `left ${currentSpeed}s ease-in-out`;

        // ÏÜêÏù¥ Î®ºÏ†Ä Ï≤´ Î≤àÏß∏ ÏªµÏúºÎ°ú Ïù¥Îèô
        hand.style.left = slotA.style.left;
        hand.style.top = "40px";

        setTimeout(() => {
            const tempLeft = slotA.style.left;
            slotA.style.left = slotB.style.left;
            slotB.style.left = tempLeft;
            
            // ÏªµÏù¥ Ïù¥ÎèôÌï† Îïå ÏÜêÎèÑ Í∞ôÏù¥ Ïù¥Îèô
            hand.style.left = slotB.style.left; 

            if (coinPos === a) coinPos = b;
            else if (coinPos === b) coinPos = a;

            // Îã§Ïùå ÏÖîÌîåÍπåÏßÄÏùò Í∞ÑÍ≤©ÏùÑ ÏÜçÎèÑÏóê ÎßûÏ∂∞ ÎèôÏ†ÅÏúºÎ°ú Í≥ÑÏÇ∞
            setTimeout(() => performShuffle(count + 1), currentSpeed * 1050);
        }, currentSpeed * 200); // Ïªµ Ïù¥Îèô ÏãúÏûë Ï†Ñ ÏÜêÏù¥ ÏúÑÏπò Ïû°Îäî ÏãúÍ∞Ñ
    }

    function select(id) {
        if (playing || finished) return;
        finished = true;
        document.getElementById(`slot-${id}`).classList.add('lifted');
        
        if (id === coinPos) {
            document.getElementById(`coins-${id}`).classList.add('visible');
            coins += rewards.win;
            document.getElementById('dialogue').innerText = `"Ï†ïÌôïÌï¥. ÏïΩÏÜçÌïú ${rewards.win}ÏΩîÏù∏Ïù¥ÏßÄ."`;
        } else {
            coins += 1;
            document.getElementById('dialogue').innerText = `"ÌãÄÎ†∏Ïñ¥. 1ÏΩîÏù∏Îßå Ï§Ñ ÌÖåÎãà ÎÇòÍ∞ÄÎ≥¥Í≤å."`;
            setTimeout(() => {
                document.getElementById(`slot-${coinPos}`).classList.add('lifted');
                document.getElementById(`coins-${coinPos}`).classList.add('visible');
            }, 500);
        }
        document.getElementById('balance').innerText = `${coins} COINS`;
        document.getElementById('main-btn').disabled = false;
        document.getElementById('main-btn').innerText = "Îã§Î•∏ Î¨ºÍ±¥ Í∫ºÎÇ¥Í∏∞";
        document.getElementById('main-btn').onclick = appraise;
    }
</script>
</body>
</html>
